/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package ControleProduto;

import GeradorDeId.GeraId;
import java.io.File;
import java.util.ArrayList;
import javax.swing.JFileChooser;
import javax.swing.JOptionPane;
import static javax.swing.JOptionPane.showMessageDialog;
import javax.swing.filechooser.FileNameExtensionFilter;

/**
 *
 * @author Juliano
 */
public class JPanelCadastrarProduto extends javax.swing.JPanel {

    /**
     * Creates new form JPanelCadastrarProduto
     */
    GeraId geraid = new GeraId();
    int idProduto, idImagem;
    File[] Imagens;

    public JPanelCadastrarProduto() {
        initComponents();
        idProduto = geraid.GeraChave(1);
        jTextFieldIDProduto.setText(Integer.toString(idProduto)); 
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        JPanelDimensao = new javax.swing.JPanel();
        JLabeLargura4 = new javax.swing.JLabel();
        JTextLargura4 = new javax.swing.JTextField();
        JLabeAltura4 = new javax.swing.JLabel();
        JTextAltura4 = new javax.swing.JTextField();
        JTextProfundidade4 = new javax.swing.JTextField();
        JLabeProfundidade4 = new javax.swing.JLabel();
        jButtonAvançarFoto = new javax.swing.JButton();
        jLabelDescricao = new javax.swing.JLabel();
        jTextFieldQuantidade = new javax.swing.JTextField();
        jLabelQuantidade = new javax.swing.JLabel();
        jLabelNumeroID = new javax.swing.JLabel();
        jLabelPrecoCompra = new javax.swing.JLabel();
        jButtonSalvar = new javax.swing.JButton();
        jLabelMarca = new javax.swing.JLabel();
        jTextFieldPrecoCompra = new javax.swing.JTextField();
        jTextFieldNomeProduto = new javax.swing.JTextField();
        jLabelNome = new javax.swing.JLabel();
        jButtonSelecionarFoto = new javax.swing.JButton();
        jTextFieldMarcaProduto = new javax.swing.JTextField();
        jTextFieldIDProduto = new javax.swing.JTextField();
        jButtonRetrocederFoto = new javax.swing.JButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTextAreaDescrição = new javax.swing.JTextArea();
        jLabelPrecoVenda = new javax.swing.JLabel();
        jTextFieldPrecoVenda = new javax.swing.JTextField();
        JLabelFotoProduto = new javax.swing.JLabel();

        JPanelDimensao.setBorder(javax.swing.BorderFactory.createTitledBorder("Dimensão do Produto:"));

        JLabeLargura4.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        JLabeLargura4.setText("Largura:");

        JLabeAltura4.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        JLabeAltura4.setText("Altura:");

        JLabeProfundidade4.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        JLabeProfundidade4.setText("Profundidade:");

        javax.swing.GroupLayout JPanelDimensaoLayout = new javax.swing.GroupLayout(JPanelDimensao);
        JPanelDimensao.setLayout(JPanelDimensaoLayout);
        JPanelDimensaoLayout.setHorizontalGroup(
            JPanelDimensaoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(JPanelDimensaoLayout.createSequentialGroup()
                .addComponent(JLabeLargura4)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(JTextLargura4, javax.swing.GroupLayout.PREFERRED_SIZE, 102, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(JLabeAltura4)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(JTextAltura4, javax.swing.GroupLayout.PREFERRED_SIZE, 102, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(JLabeProfundidade4)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(JTextProfundidade4, javax.swing.GroupLayout.PREFERRED_SIZE, 102, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 185, Short.MAX_VALUE))
        );
        JPanelDimensaoLayout.setVerticalGroup(
            JPanelDimensaoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, JPanelDimensaoLayout.createSequentialGroup()
                .addGap(0, 0, Short.MAX_VALUE)
                .addGroup(JPanelDimensaoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(JLabeLargura4)
                    .addComponent(JTextLargura4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(JLabeAltura4)
                    .addComponent(JTextAltura4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(JTextProfundidade4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(JLabeProfundidade4)))
        );

        jButtonAvançarFoto.setFont(new java.awt.Font("Arial", 0, 11)); // NOI18N
        jButtonAvançarFoto.setText("Avançar");

        jLabelDescricao.setFont(new java.awt.Font("Arial", 1, 14)); // NOI18N
        jLabelDescricao.setText("Descrição do produto:");

        jTextFieldQuantidade.setFont(new java.awt.Font("Arial", 0, 14)); // NOI18N

        jLabelQuantidade.setFont(new java.awt.Font("Arial", 1, 14)); // NOI18N
        jLabelQuantidade.setText("Quantidade:");

        jLabelNumeroID.setFont(new java.awt.Font("Arial", 1, 14)); // NOI18N
        jLabelNumeroID.setText("Número de identificação:");

        jLabelPrecoCompra.setFont(new java.awt.Font("Arial", 1, 14)); // NOI18N
        jLabelPrecoCompra.setText("Preço de compra:");

        jButtonSalvar.setText("Salvar");
        jButtonSalvar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonSalvarActionPerformed(evt);
            }
        });

        jLabelMarca.setFont(new java.awt.Font("Arial", 1, 14)); // NOI18N
        jLabelMarca.setText("Marca:");

        jTextFieldPrecoCompra.setFont(new java.awt.Font("Arial", 0, 14)); // NOI18N

        jTextFieldNomeProduto.setFont(new java.awt.Font("Arial", 0, 14)); // NOI18N

        jLabelNome.setFont(new java.awt.Font("Arial", 1, 14)); // NOI18N
        jLabelNome.setText("Nome:");

        jButtonSelecionarFoto.setText("Selecionar Foto");
        jButtonSelecionarFoto.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonSelecionarFotoActionPerformed(evt);
            }
        });

        jTextFieldMarcaProduto.setFont(new java.awt.Font("Arial", 0, 14)); // NOI18N

        jTextFieldIDProduto.setEditable(false);
        jTextFieldIDProduto.setFont(new java.awt.Font("Arial", 0, 12)); // NOI18N

        jButtonRetrocederFoto.setText("Retroceder");

        jTextAreaDescrição.setColumns(20);
        jTextAreaDescrição.setRows(5);
        jScrollPane1.setViewportView(jTextAreaDescrição);

        jLabelPrecoVenda.setFont(new java.awt.Font("Arial", 1, 14)); // NOI18N
        jLabelPrecoVenda.setText("Preço de venda:");

        jTextFieldPrecoVenda.setFont(new java.awt.Font("Arial", 0, 14)); // NOI18N

        JLabelFotoProduto.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        JLabelFotoProduto.setText("Inserir Foto");
        JLabelFotoProduto.setBorder(javax.swing.BorderFactory.createTitledBorder("Imagem X-1/X"));
        JLabelFotoProduto.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                JLabelFotoProdutoMouseClicked(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 1000, Short.MAX_VALUE)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addGap(19, 19, 19)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(jButtonSalvar)
                                .addGap(4, 4, 4))
                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 962, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                        .addGroup(layout.createSequentialGroup()
                                            .addComponent(jButtonRetrocederFoto)
                                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                            .addComponent(jButtonSelecionarFoto))
                                        .addComponent(JLabelFotoProduto, javax.swing.GroupLayout.PREFERRED_SIZE, 235, javax.swing.GroupLayout.PREFERRED_SIZE))
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                        .addGroup(layout.createSequentialGroup()
                                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                                .addGroup(layout.createSequentialGroup()
                                                    .addComponent(jLabelMarca)
                                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                    .addComponent(jTextFieldMarcaProduto))
                                                .addComponent(jLabelNumeroID))
                                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                                .addGroup(layout.createSequentialGroup()
                                                    .addComponent(jTextFieldIDProduto, javax.swing.GroupLayout.PREFERRED_SIZE, 105, javax.swing.GroupLayout.PREFERRED_SIZE)
                                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                                    .addComponent(jLabelNome))
                                                .addGroup(layout.createSequentialGroup()
                                                    .addComponent(jLabelQuantidade)
                                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                    .addComponent(jTextFieldQuantidade, javax.swing.GroupLayout.PREFERRED_SIZE, 70, javax.swing.GroupLayout.PREFERRED_SIZE)))
                                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                            .addComponent(jTextFieldNomeProduto, javax.swing.GroupLayout.PREFERRED_SIZE, 375, javax.swing.GroupLayout.PREFERRED_SIZE))
                                        .addGroup(layout.createSequentialGroup()
                                            .addComponent(jLabelPrecoVenda)
                                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                            .addComponent(jTextFieldPrecoVenda, javax.swing.GroupLayout.PREFERRED_SIZE, 147, javax.swing.GroupLayout.PREFERRED_SIZE)
                                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                            .addComponent(jLabelPrecoCompra)
                                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                            .addComponent(jTextFieldPrecoCompra, javax.swing.GroupLayout.PREFERRED_SIZE, 98, javax.swing.GroupLayout.PREFERRED_SIZE))
                                        .addComponent(JPanelDimensao, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addComponent(jButtonAvançarFoto)))))
                        .addComponent(jLabelDescricao))
                    .addContainerGap(19, Short.MAX_VALUE)))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 600, Short.MAX_VALUE)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addGap(18, 18, 18)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(JLabelFotoProduto, javax.swing.GroupLayout.PREFERRED_SIZE, 197, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGroup(layout.createSequentialGroup()
                            .addGap(9, 9, 9)
                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                .addComponent(jLabelNumeroID)
                                .addComponent(jTextFieldIDProduto, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(jLabelNome)
                                .addComponent(jTextFieldNomeProduto, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                .addComponent(jLabelMarca)
                                .addComponent(jTextFieldMarcaProduto, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(jLabelQuantidade)
                                .addComponent(jTextFieldQuantidade, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                .addComponent(jLabelPrecoVenda)
                                .addComponent(jTextFieldPrecoVenda, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(jLabelPrecoCompra)
                                .addComponent(jTextFieldPrecoCompra, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(JPanelDimensao, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(jButtonSelecionarFoto)
                        .addComponent(jButtonAvançarFoto)
                        .addComponent(jButtonRetrocederFoto))
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                    .addComponent(jLabelDescricao)
                    .addGap(4, 4, 4)
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 271, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                    .addComponent(jButtonSalvar)
                    .addContainerGap(19, Short.MAX_VALUE)))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void JLabelFotoProdutoMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_JLabelFotoProdutoMouseClicked

        // TODO add your handling code here:
    }//GEN-LAST:event_JLabelFotoProdutoMouseClicked

    private void jButtonSalvarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonSalvarActionPerformed
        int tam = Imagens.length;
        if (jTextFieldNomeProduto.getText().equals("")
                || jTextFieldMarcaProduto.getText().equals("")
                || jTextFieldQuantidade.getText().equals("")
                || jTextFieldPrecoVenda.getText().equals("")
                || jTextFieldPrecoCompra.getText().equals("")
                || JTextLargura4.getText().equals("")
                || JTextProfundidade4.getText().equals("")
                || JTextAltura4.getText().equals("")
                || jTextAreaDescrição.getText().equals("")) {
            showMessageDialog(null, "Um dos campos não foi preenchido");
        } else {
            try {
                Produto produto = new ControlaProduto().cadastraProduto(Integer.toString(idProduto), jTextFieldNomeProduto.getText(), Integer.parseInt(jTextFieldQuantidade.getText()), jTextAreaDescrição.getText(), Float.parseFloat(jTextFieldPrecoVenda.getText()), Float.parseFloat(jTextFieldPrecoCompra.getText()), Float.parseFloat(JTextAltura4.getText()), Float.parseFloat(JTextLargura4.getText()), Float.parseFloat(JTextProfundidade4.getText()), jTextFieldMarcaProduto.getText());
                JOptionPane.showMessageDialog(null, "O produto: " + jTextFieldNomeProduto.getText() + ", foi registrado com ID: " + idProduto + ".");
                idProduto = geraid.GeraChave(1);
                idImagem = geraid.GeraChave(3);
                for (int i = 0; i != tam; i++) {
                    //BufferedImage bImageFromConvert = ImageIO.read(Imagens[i]);
                    //byte[] bytes = Files.readAllBytes(Paths.get(Imagens[i]));
                    //ImagemProduto imagemProduto = new ControlaImagemProduto().cadastraImagem(Integer.toString(idImagem), bImageFromConvert );
                    idImagem = geraid.GeraChave(3);
                }
                limpaCampos();

            } catch (Exception e) {
                JOptionPane.showMessageDialog(null, "O produto não pode ser cadastrado devido a um erro!");
            }
        }
    }//GEN-LAST:event_jButtonSalvarActionPerformed

    private void jButtonSelecionarFotoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonSelecionarFotoActionPerformed
        if (Imagens.length != 0) {
            jButtonSelecionarFoto.setVisible(true);
        } else {
            jButtonSelecionarFoto.setVisible(false);
        }

        FileNameExtensionFilter filter = new FileNameExtensionFilter("Image Files", "jpg", "png", "jpeg");
        JFileChooser fileChooser = new JFileChooser();
        fileChooser.setFileFilter(filter);
        fileChooser.setMultiSelectionEnabled(true);
        fileChooser.setCurrentDirectory(new File(System.getProperty("user.home")));
        int result = fileChooser.showOpenDialog(this);
        if (result == JFileChooser.APPROVE_OPTION) {
            Imagens = fileChooser.getSelectedFiles();
            int tam = Imagens.length;
            /*System.out.println("Tamanho do tam: " + tam);
            for (int i = 0; i != tam; i++) {
                System.out.println("Selected file: " + Imagens[i].getAbsolutePath());
            }*///TESTE PARA VERIFICAR A EXECUÇÃO
        }
    }//GEN-LAST:event_jButtonSelecionarFotoActionPerformed

    public void limpaCampos() {
        jTextFieldNomeProduto.setText("");
        jTextFieldQuantidade.setText("");
        jTextAreaDescrição.setText("");
        jTextFieldPrecoCompra.setText("");
        jTextFieldPrecoVenda.setText("");
        JTextLargura4.setText("");
        JTextProfundidade4.setText("");
        JLabeProfundidade4.setText("");
        jTextFieldMarcaProduto.setText("");

    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel JLabeAltura4;
    private javax.swing.JLabel JLabeLargura4;
    private javax.swing.JLabel JLabeProfundidade4;
    private javax.swing.JLabel JLabelFotoProduto;
    private javax.swing.JPanel JPanelDimensao;
    private javax.swing.JTextField JTextAltura4;
    private javax.swing.JTextField JTextLargura4;
    private javax.swing.JTextField JTextProfundidade4;
    private javax.swing.JButton jButtonAvançarFoto;
    private javax.swing.JButton jButtonRetrocederFoto;
    private javax.swing.JButton jButtonSalvar;
    private javax.swing.JButton jButtonSelecionarFoto;
    private javax.swing.JLabel jLabelDescricao;
    private javax.swing.JLabel jLabelMarca;
    private javax.swing.JLabel jLabelNome;
    private javax.swing.JLabel jLabelNumeroID;
    private javax.swing.JLabel jLabelPrecoCompra;
    private javax.swing.JLabel jLabelPrecoVenda;
    private javax.swing.JLabel jLabelQuantidade;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTextArea jTextAreaDescrição;
    private javax.swing.JTextField jTextFieldIDProduto;
    private javax.swing.JTextField jTextFieldMarcaProduto;
    private javax.swing.JTextField jTextFieldNomeProduto;
    private javax.swing.JTextField jTextFieldPrecoCompra;
    private javax.swing.JTextField jTextFieldPrecoVenda;
    private javax.swing.JTextField jTextFieldQuantidade;
    // End of variables declaration//GEN-END:variables
}
